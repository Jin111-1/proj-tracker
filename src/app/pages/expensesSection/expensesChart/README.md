# คอมโพเนนต์กราฟค่าใช้จ่าย (Expenses Chart Components)

คอมโพเนนต์ชุดนี้ใช้สำหรับแสดงข้อมูลค่าใช้จ่ายในรูปแบบกราฟและสถิติต่างๆ

## คอมโพเนนต์ที่รวมอยู่

### 1. ExpensesChart
แสดงกราฟค่าใช้จ่ายแบบพื้นฐาน
- **ฟีเจอร์:**
  - เลือกประเภทกราฟ (เส้น, แท่ง, วงกลม)
  - จัดกลุ่มข้อมูลตามวันที่หรือหมวดหมู่
  - แสดงสถิติสรุป (ยอดรวม, ค่าเฉลี่ย, สูงสุด, ต่ำสุด, จำนวนรายการ)
  - รีเฟรชข้อมูล

### 2. ExpensesSummary
แสดงสรุปค่าใช้จ่ายตามหมวดหมู่
- **ฟีเจอร์:**
  - ตารางแสดงรายละเอียดตามหมวดหมู่
  - กราฟแท่งแนวนอน
  - แถบแสดงเปอร์เซ็นต์
  - คำนวณสัดส่วนค่าใช้จ่าย

### 3. ExpensesTrend
แสดงแนวโน้มค่าใช้จ่ายตามเวลา
- **ฟีเจอร์:**
  - กราฟแนวโน้มรายวัน
  - แสดงค่าใช้จ่ายสะสม (optional)
  - สถิติแนวโน้ม (อัตราการเติบโต, ค่าเฉลี่ยรายวัน)
  - ตารางข้อมูลรายวัน

## การใช้งาน

```tsx
import { ExpensesChart, ExpensesSummary, ExpensesTrend } from "./expensesChart";

// ใช้ในคอมโพเนนต์
<ExpensesChart projectId={projectId} />
<ExpensesSummary projectId={projectId} />
<ExpensesTrend projectId={projectId} />
```

## API ที่ใช้

คอมโพเนนต์ทั้งหมดใช้ API endpoint: `/api/expenses/chart-data`

### Parameters:
- `project_id`: ID ของโปรเจค
- `group_by`: การจัดกลุ่มข้อมูล ('date' หรือ 'category')

### Response:
```json
{
  "chartData": [
    {
      "date": "2024-01-01",
      "category": "วัสดุ",
      "total": 5000
    }
  ],
  "statistics": {
    "totalAmount": 50000,
    "averageAmount": 2500,
    "maxAmount": 10000,
    "minAmount": 500,
    "totalCount": 20
  },
  "groupBy": "date",
  "projectId": "project-id"
}
```

## Dependencies

- `chart.js`: Library หลักสำหรับสร้างกราฟ
- `react-chartjs-2`: React wrapper สำหรับ Chart.js

## การติดตั้ง

```bash
npm install chart.js react-chartjs-2
```

## ฟีเจอร์เพิ่มเติม

### การปรับแต่งสี
แต่ละคอมโพเนนต์ใช้ชุดสีที่แตกต่างกัน:
- กราฟเส้น: สีน้ำเงิน
- กราฟแท่ง: สีหลากหลายตามหมวดหมู่
- กราฟวงกลม: สีหลากหลาย

### การแสดงผลสกุลเงิน
ใช้ `Intl.NumberFormat` สำหรับแสดงผลสกุลเงินบาทในรูปแบบไทย

### Responsive Design
กราฟทั้งหมดรองรับการแสดงผลบนอุปกรณ์ต่างๆ

## การแก้ไขปัญหา

### กราฟไม่แสดง
1. ตรวจสอบว่าได้ติดตั้ง dependencies แล้ว
2. ตรวจสอบการเชื่อมต่อ API
3. ตรวจสอบข้อมูลที่ส่งมาจาก API

### ข้อมูลไม่ตรง
1. ตรวจสอบ project_id ที่ส่งไป
2. ตรวจสอบการจัดกลุ่มข้อมูล (group_by)
3. ตรวจสอบสิทธิ์การเข้าถึง (ต้องเป็น admin)

## การพัฒนาต่อ

### เพิ่มฟีเจอร์ใหม่
1. เพิ่มประเภทกราฟใหม่
2. เพิ่มการกรองข้อมูลตามช่วงเวลา
3. เพิ่มการส่งออกข้อมูล (Export)
4. เพิ่มการเปรียบเทียบระหว่างโปรเจค

### การปรับแต่ง
1. ปรับแต่งสีและธีม
2. เพิ่มการแสดงผลแบบ Dark mode
3. เพิ่มการแสดงผลแบบ Real-time 